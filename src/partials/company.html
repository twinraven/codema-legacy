<div class="company-details" ng-class="{'is-editing': isEditing, 'is-loading': isLoading}">
    <div class="company-details__inner">
        <edit-bar data-pos="top"></edit-bar>

        <div class="company-row">
            <p class="field-label">Name</p>
            <p class="field-output">{{company.name}}</p>
            <input type="text" ng-model="company.name" class="field-edit" id="co-name" name="co-name">
        </div>

        <div class="company-row">
            <p class="field-label">Address</p>
            <p class="field-output">{{company.address}}</p>
            <input type="text" ng-model="company.address" class="field-edit" id="co-address" name="co-address">
        </div>

        <div class="company-row company-row--textarea">
            <p class="field-label">Notes</p>
            <p class="field-output">{{company.notes}}</p>
            <textarea ng-model="company.notes" class="field-edit" id="co-notes" name="co-notes"></textarea>
        </div>

        <div class="company-row">
            <p class="field-label">Contact name</p>
            <p class="field-output">{{company.contactName}}</p>
            <input type="text" ng-model="company.contactName" class="field-edit" id="co-contactName" name="co-contactName" ng-focus="showContacts = true" ng-blur="delayBlur()">
            <ul class="company-contacts-list" ng-show="showContacts && company.contactName.length && filteredContacts.length">
                <li ng-repeat="contact in filteredContacts = (contacts | filter:company.contactName)"><a href="javascript:;" ng-href="" ng-click="selectContact(contact)">{{contact}}</a></li>
            </ul>
        </div>

        <div class="company-row company-row--last">
            <p class="field-label">Contact email address</p>
            <p class="field-output"><a href="mailto:{{company.contactEmail}}">{{company.contactEmail}}</a></p>
            <input type="email" ng-model="company.contactEmail" class="field-edit" id="co-contactEmail" name="co-contactEmail">
        </div>

        <div class="company-contracts">
            <div ng-repeat="contract in company.contracts" class="contract-details" ng-include="'partials/contract.html'" ng-init="unique=$index"></div>
            <a href="javascript:;" ng-click="addContract()" ng-show="isEditing" class="add-contract"><span class="icon-add"></span> Add contract</a>
        </div>

        <edit-bar data-pos="bottom"></edit-bar>
    </div>
</div>

<db-controls></db-controls>